# –ê–Ω–∞–ª–∏–∑ —Ç–∏–ø–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π "–ü–µ—Ä–µ–≤–æ–¥" (Internal Transfer)

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2024-01-XX  
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2024-01-XX  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

---

## üìã –†–µ–∑—é–º–µ

‚úÖ **–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!**

–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π "–ü–µ—Ä–µ–≤–æ–¥" (internal transfer) —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production. –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π, –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤–∞–ª—é—Ç –∏ UI/UX –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã.

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–∞–º–æ–º—É —Å–µ–±–µ** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ `AccountActionView` –∏ `EditTransactionView`
2. ‚úÖ **–ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–∞–ª—é—Ç** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–ª—é—Ç –¥–ª—è –æ–±–æ–∏—Ö —Å—á–µ—Ç–æ–≤ (source –∏ target)
3. ‚úÖ **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —á–µ—Ä–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ `convertSync()` –¥–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è
4. ‚úÖ **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–π** - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ü–µ—Ä–µ–≤–æ–¥"
5. ‚úÖ **UI/UX —É–ª—É—á—à–µ–Ω–∏—è** - –¥–æ–±–∞–≤–ª–µ–Ω—ã alert'—ã, haptic feedback, –ª–æ–≥–æ—Ç–∏–ø—ã —Å—á–µ—Ç–æ–≤, –ø—Ä–µ—Ñ–∏–∫—Å "‚Üí"

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–∞–º–æ–º—É —Å–µ–±–µ - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–õ–æ–∫–∞—Ü–∏—è:** `AccountActionView.swift:275-281`, `EditTransactionView.swift:271-289`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```swift
// –í–∞–ª–∏–¥–∞—Ü–∏—è: –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–µ–≤–æ–¥ —Å–∞–º–æ–º—É —Å–µ–±–µ
guard targetAccountId != account.id else {
    errorMessage = "–ù–µ–ª—å–∑—è –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ —Ç–æ—Ç –∂–µ —Å—á–µ—Ç"
    showingError = true
    HapticManager.warning()
    return
}
```

‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ `AccountActionView.saveTransaction()` 
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ `EditTransactionView.saveTransaction()`
- Alert –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- Haptic feedback –¥–ª—è –æ—à–∏–±–æ–∫

---

### 2. ‚úÖ –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–∞–ª—é—Ç –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–∞—Ö –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏ - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–õ–æ–∫–∞—Ü–∏—è:** `AccountActionView.swift:223-239`, `TransactionsViewModel.swift:1179-1210`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ `CurrencyConverter.convertSync()` –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫—ç—à
- –û–±–Ω–æ–≤–ª–µ–Ω `recalculateAccountBalances()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `convertSync()` –¥–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ `convertedAmount`
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ `convertSync()` –≤ `recalculateAccountBalances()`

‚ö†Ô∏è **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** –ï—Å–ª–∏ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –∫—ç—à, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω–æ–π. TODO: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `targetConvertedAmount` –≤ –º–æ–¥–µ–ª—å Transaction –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—É–º–º—ã –ø–æ–ª—É—á–∞—Ç–µ–ª—è.

---

### 3. ‚úÖ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–ª—é—Ç –≤ `recalculateAccountBalances()` - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–õ–æ–∫–∞—Ü–∏—è:** `TransactionsViewModel.swift:1179-1210`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```swift
case .internalTransfer:
    // –î–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞: –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞–∑–Ω—ã–µ —Å—É–º–º—ã –¥–ª—è source –∏ target —Å—á–µ—Ç–æ–≤
    if let sourceId = tx.accountId,
       let sourceAccount = accounts.first(where: { $0.id == sourceId }) {
        // –ò—Å—Ç–æ—á–Ω–∏–∫: –∏—Å–ø–æ–ª—å–∑—É–µ–º convertedAmount –∏–ª–∏ amount –≤ –≤–∞–ª—é—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
        let sourceAmount: Double = ...
        balanceChanges[sourceId, default: 0] -= sourceAmount
    }
    
    if let targetId = tx.targetAccountId,
       let targetAccount = accounts.first(where: { $0.id == targetId }) {
        // –ü–æ–ª—É—á–∞—Ç–µ–ª—å: –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ –∫—ç—à —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
        let targetAmount: Double = CurrencyConverter.convertSync(...) ?? tx.amount
        balanceChanges[targetId, default: 0] += targetAmount
    }
```

‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –†–∞–∑–Ω—ã–µ —Å—É–º–º—ã –¥–ª—è source –∏ target —Å—á–µ—Ç–æ–≤
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `convertSync()`
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–ª—é—Ç –¥–ª—è –æ–±–æ–∏—Ö —Å—á–µ—Ç–æ–≤

---

### 4. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–õ–æ–∫–∞—Ü–∏—è:** `AccountActionView.swift:208-238`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```swift
guard let converted = await CurrencyConverter.convert(...) else {
    await MainActor.run {
        errorMessage = "–û—à–∏–±–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É."
        showingError = true
        HapticManager.error()
    }
    return
}
```

‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
- Alert –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- Haptic feedback –¥–ª—è –æ—à–∏–±–æ–∫
- –ü–µ—Ä–µ–≤–æ–¥ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

---

### 5. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è amount > 0 - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–õ–æ–∫–∞—Ü–∏—è:** `AccountActionView.swift:186-194`, `EditTransactionView.swift:272-284`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```swift
guard !amountText.isEmpty,
      let amount = Double(amountText.replacingOccurrences(of: ",", with: ".")),
      amount > 0 else {
    errorMessage = "–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—É—é —Å—É–º–º—É"
    showingError = true
    HapticManager.warning()
    return
}
```

‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
- Alert –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- Haptic feedback –¥–ª—è –æ—à–∏–±–æ–∫

---

## üî¥ –û—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã

**–õ–æ–∫–∞—Ü–∏—è:** `AccountActionView.swift:170-172`

```swift
private var availableAccounts: [Account] {
    viewModel.accounts.filter { $0.id != account.id }
}
```

‚úÖ **–•–æ—Ä–æ—à–æ:** –§–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—á–µ—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π.

‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ `saveTransaction` - –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –≤—ã–∑–æ–≤.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```swift
guard let targetAccountId = selectedTargetAccountId,
      targetAccountId != account.id,
      !availableAccounts.isEmpty else { 
    return 
}
```

---

### 2. –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–∞–ª—é—Ç –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–∞—Ö –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏

**–õ–æ–∫–∞—Ü–∏—è:** `AccountActionView.swift:188-197`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–µ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–∞–ª—é—Ç–∞–º–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∞–ª—é—Ç—É **–∏—Å—Ç–æ—á–Ω–∏–∫–∞** (`account.currency`)
- –ù–æ —Å—É–º–º–∞ –Ω–∞ **–ø–æ–ª—É—á–∞—Ç–µ–ª–µ** (`targetAccount`) –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è **–±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏**
- –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ **–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –±–∞–ª–∞–Ω—Å–∞–º**

**–ü—Ä–∏–º–µ—Ä:**
- –°—á–µ—Ç 1: USD, –±–∞–ª–∞–Ω—Å $100
- –°—á–µ—Ç 2: KZT, –±–∞–ª–∞–Ω—Å 0 ‚Ç∏
- –ü–µ—Ä–µ–≤–æ–¥ $10 —Å –°—á–µ—Ç–∞ 1 –Ω–∞ –°—á–µ—Ç 2
- **–û–∂–∏–¥–∞–µ–º–æ:** –°—á–µ—Ç 1: $90, –°—á–µ—Ç 2: ~4500 ‚Ç∏ (–ø—Ä–∏ –∫—É—Ä—Å–µ 1 USD = 450 KZT)
- **–§–∞–∫—Ç–∏—á–µ—Å–∫–∏:** –°—á–µ—Ç 1: $90, –°—á–µ—Ç 2: 10 ‚Ç∏ ‚ùå

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```swift
// AccountActionView.swift:188-197
var convertedAmount: Double? = nil
if selectedCurrency != account.currency {
    convertedAmount = await CurrencyConverter.convert(
        amount: amount,
        from: selectedCurrency,
        to: account.currency
    )
}
// ‚ùå –ù–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –¥–ª—è targetAccount!
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```swift
// –ù—É–∂–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –æ–±–æ–∏—Ö —Å—á–µ—Ç–æ–≤
let targetAccount = accounts.first { $0.id == targetAccountId }
if let targetAccount = targetAccount,
   selectedCurrency != targetAccount.currency {
    // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –≤–∞–ª—é—Ç—É –ø–æ–ª—É—á–∞—Ç–µ–ª—è
    let targetConverted = await CurrencyConverter.convert(
        amount: amount,
        from: selectedCurrency,
        to: targetAccount.currency
    )
    // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è targetAccount
}
```

---

### 3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–ª—é—Ç –≤ `recalculateAccountBalances()`

**–õ–æ–∫–∞—Ü–∏—è:** `TransactionsViewModel.swift:1179-1186`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```swift
case .internalTransfer:
    if let sourceId = tx.accountId {
        balanceChanges[sourceId, default: 0] -= amountToUse
    }
    if let targetId = tx.targetAccountId {
        balanceChanges[targetId, default: 0] += amountToUse
    }
```

‚ùå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `amountToUse` (convertedAmount –∏–ª–∏ amount) –¥–ª—è **–æ–±–æ–∏—Ö —Å—á–µ—Ç–æ–≤**, –Ω–æ:
- –î–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (sourceId) –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É–º–º—É –≤ –≤–∞–ª—é—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- –î–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è (targetId) –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É–º–º—É –≤ –≤–∞–ª—é—Ç–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- –°–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ —Å—É–º–º–∞ –¥–ª—è –æ–±–æ–∏—Ö

**–ü—Ä–∏–º–µ—Ä:**
- –ü–µ—Ä–µ–≤–æ–¥ $10 (USD) ‚Üí —Å—á–µ—Ç –≤ KZT (–ø—Ä–∏ –∫—É—Ä—Å–µ 450 KZT/USD)
- Source account (USD): -$10 ‚úÖ
- Target account (KZT): +10 ‚Ç∏ ‚ùå (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å +4500 ‚Ç∏)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–ù—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—É–º–º—ã –¥–ª—è source –∏ target —Å—á–µ—Ç–æ–≤, –∏–ª–∏ —Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞–ª—é—Ç–∞—Ö –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ª–µ—Ç—É.

---

### 4. –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –º–µ—Ç–æ–¥ `transfer()`

**–õ–æ–∫–∞—Ü–∏—è:** `TransactionsViewModel.swift:941-985`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ú–µ—Ç–æ–¥ `transfer()` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è**
- –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `addTransaction()` —Å —Ç–∏–ø–æ–º `.internalTransfer`
- –ú–µ—Ç–æ–¥ `transfer()` –æ–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å—ã –Ω–∞–ø—Ä—è–º—É—é, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –õ–∏–±–æ —É–¥–∞–ª–∏—Ç—å –º–µ—Ç–æ–¥ `transfer()` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `addTransaction()`
- –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `transfer()` –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤, –∞ `addTransaction()` - –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥—Ö–æ–¥

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 5. –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π

**–õ–æ–∫–∞—Ü–∏—è:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ

- `AccountActionView.swift:228` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è: `"–ü–µ—Ä–µ–≤–æ–¥"`
- `TransactionsViewModel.swift:973` (–º–µ—Ç–æ–¥ `transfer()`) - –∫–∞—Ç–µ–≥–æ—Ä–∏—è: `"Transfer"`
- `EditTransactionView.swift` - –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø `.internalTransfer` –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ê–Ω–≥–ª–∏–π—Å–∫–æ–µ –∏ —Ä—É—Å—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –í `EditTransactionView` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞, —á—Ç–æ –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: `"–ü–µ—Ä–µ–≤–æ–¥"` (–∏–ª–∏ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ)
- –í `EditTransactionView` —Å–∫—Ä—ã—Ç—å/–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

---

### 6. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–∞

**–õ–æ–∫–∞—Ü–∏—è:** `EditTransactionView.swift:75-106`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å `accountId` –∏ `targetAccountId` —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ —Å–æ–≤–ø–∞–¥–∞–ª–∏
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `accountId == targetAccountId`
- –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–µ—Ä–µ–≤–æ–¥–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```swift
// –í saveTransaction() –¥–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é:
if transaction.type == .internalTransfer {
    guard let sourceId = selectedAccountId,
          let targetId = selectedTargetAccountId,
          sourceId != targetId else {
        // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É
        return
    }
}
```

---

### 7. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏

**–õ–æ–∫–∞—Ü–∏—è:** `HistoryView.swift:679-696`

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```swift
if transaction.type == .internalTransfer {
    HStack(spacing: 4) {
        if let sourceId = transaction.accountId,
           let sourceAccount = accounts.first(where: { $0.id == sourceId }) {
            Text(sourceAccount.name)
        }
        Image(systemName: "arrow.right")
        if let targetId = transaction.targetAccountId,
           let targetAccount = accounts.first(where: { $0.id == targetId }) {
            Text(targetAccount.name)
        }
    }
}
```

‚úÖ **–•–æ—Ä–æ—à–æ:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞.

‚ö†Ô∏è **–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–∞–ª—é—Ç–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
- –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞ (–µ—Å–ª–∏ –≤–∞–ª—é—Ç–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è)
- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ª–æ–≥–æ—Ç–∏–ø —Å—á–µ—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–æ–≥–æ—Ç–∏–ø–æ–≤ —Å—á–µ—Ç–æ–≤
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–∞–ª—é—Ç—É –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—É–º–º—É, –µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è

---

### 8. –°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏

**–õ–æ–∫–∞—Ü–∏—è:** `HistoryView.swift:804-818`

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```swift
private var amountText: String {
    let prefix = transaction.type == .income ? "+" : transaction.type == .expense ? "-" : ""
    // ...
}
```

‚ùå **–ü—Ä–æ–±–ª–µ–º–∞:** –î–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –Ω–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å–∞ (–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞), —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ—á–µ–≤–∏–¥–Ω–æ.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```swift
let prefix = switch transaction.type {
case .income: "+"
case .expense: "-"
case .internalTransfer: "‚Üí" // –∏–ª–∏ "‚Üî"
}
```

---

### 9. –¶–≤–µ—Ç —Å—É–º–º—ã –ø–µ—Ä–µ–≤–æ–¥–∞

**–õ–æ–∫–∞—Ü–∏—è:** `HistoryView.swift:841-850`

```swift
case .internalTransfer:
    return .gray
```

‚úÖ **–•–æ—Ä–æ—à–æ:** –°–µ—Ä—ã–π —Ü–≤–µ—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –ª–æ–≥–∏—á–µ–Ω.

‚ö†Ô∏è **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.blue` –¥–ª—è –±–æ–ª–µ–µ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–≥–æ —Å—Ç–∏–ª—è (—Ç–∞–∫ –∫–∞–∫ –∏–∫–æ–Ω–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Å–∏–Ω—è—è).

---

### 10. –ò–∫–æ–Ω–∫–∞ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

**–õ–æ–∫–∞—Ü–∏—è:** `CategoryEmoji.swift:13`

```swift
if type == .internalTransfer {
    return "arrow.left.arrow.right"
}
```

‚úÖ **–•–æ—Ä–æ—à–æ:** –ò–∫–æ–Ω–∫–∞ —Å—Ç—Ä–µ–ª–æ–∫ –ª–æ–≥–∏—á–Ω–∞ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤.

‚ö†Ô∏è **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `arrow.left.arrow.right.circle.fill` –¥–ª—è –±–æ–ª–µ–µ –∑–∞–º–µ—Ç–Ω–æ–π –∏–∫–æ–Ω–∫–∏.

---

### 11. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç

**–õ–æ–∫–∞—Ü–∏—è:** `AccountActionView.swift:192-196`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ï—Å–ª–∏ `CurrencyConverter.convert()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `nil` (–æ—à–∏–±–∫–∞ —Å–µ—Ç–∏, –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –≤–∞–ª—é—Ç–∞), –ø–µ—Ä–µ–≤–æ–¥ –≤—Å—ë —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è
- `convertedAmount` –±—É–¥–µ—Ç `nil`, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```swift
if selectedCurrency != account.currency {
    guard let converted = await CurrencyConverter.convert(
        amount: amount,
        from: selectedCurrency,
        to: account.currency
    ) else {
        // –ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        return
    }
    convertedAmount = converted
}
```

---

### 12. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ recurring –ø–µ—Ä–µ–≤–æ–¥–æ–≤

**–õ–æ–∫–∞—Ü–∏—è:** `EditTransactionView.swift:294`, `RecurringTransaction.swift:19`

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è `targetAccountId` –≤ `RecurringSeries`
- ‚úÖ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å recurring –ø–µ—Ä–µ–≤–æ–¥

‚ö†Ô∏è **–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ recurring –ø–µ—Ä–µ–≤–æ–¥–∞
- –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å recurring –ø–µ—Ä–µ–≤–æ–¥ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ —Å—á–µ—Ç–∞–º–∏
- –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç –¥–ª—è recurring –ø–µ—Ä–µ–≤–æ–¥–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ `createRecurringSeries()`:
```swift
if type == .internalTransfer {
    guard let sourceId = accountId,
          let targetId = targetAccountId,
          sourceId != targetId else {
        throw ValidationError.invalidTransfer
    }
}
```

---

## üìä –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

### –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã

1. ‚úÖ **–•–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥–µ–ª–∏:** `Transaction` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ö—Ä–∞–Ω–∏—Ç `accountId` –∏ `targetAccountId`
2. ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ summary:** –ü–µ—Ä–µ–≤–æ–¥—ã —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ (`totalInternalTransfers`)
3. ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:** –í –∏—Å—Ç–æ—Ä–∏–∏ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–≤–æ–¥—ã —Å –æ–±–æ–∏—Ö —Å—á–µ—Ç–æ–≤ (`accountId || targetAccountId`)
4. ‚úÖ **UI –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:** –ü–µ—Ä–µ–≤–æ–¥—ã –≤–∏–∑—É–∞–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è (—Å–∏–Ω—è—è –∏–∫–æ–Ω–∫–∞, —Å–µ—Ä—ã–π —Ü–≤–µ—Ç —Å—É–º–º—ã)

### –û–±–ª–∞—Å—Ç–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ (–Ω–µ–∫—Ä–∏—Ç–∏—á–Ω–æ):**
   - –ú–µ—Ç–æ–¥ `transfer()` –∏ `addTransaction()` —Å —Ç–∏–ø–æ–º `.internalTransfer` –¥—É–±–ª–∏—Ä—É—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
   - –ú–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ - –æ–±–∞ –º–µ—Ç–æ–¥–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

2. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–∞:**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `AccountActionView.saveTransaction()` –∏ `EditTransactionView.saveTransaction()`
   - –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π –º–µ—Ç–æ–¥ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ

3. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∞:**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç —Å alert'–∞–º–∏
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

---

## üé® UI/UX —É–ª—É—á—à–µ–Ω–∏—è - –í–´–ü–û–õ–ù–ï–ù–û

### 1. ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã `alert`'—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –≤ `AccountActionView` –∏ `EditTransactionView`
- –î–æ–±–∞–≤–ª–µ–Ω `HapticManager.error()` –∏ `HapticManager.warning()` –¥–ª—è —Ç–∞–∫—Ç–∏–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
- –í—Å–µ –æ—à–∏–±–∫–∏ —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø—Ä–∏ –ª—é–±—ã—Ö –æ—à–∏–±–∫–∞—Ö.

### 2. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ —Å—É–º–º—ã - –ò–°–ü–†–ê–í–õ–ï–ù–û

**–õ–æ–∫–∞—Ü–∏—è:** `AccountActionView.swift:186-194`, `EditTransactionView.swift:272-284`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```swift
guard !amountText.isEmpty,
      let amount = Double(amountText.replacingOccurrences(of: ",", with: ".")),
      amount > 0 else {
    errorMessage = "–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—É—é —Å—É–º–º—É"
    showingError = true
    HapticManager.warning()
    return
}
```

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ.

### 3. ‚ö†Ô∏è –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∞–ª—é—Ç –≤ —Ñ–æ—Ä–º–µ –ø–µ—Ä–µ–≤–æ–¥–∞ (—á–∞—Å—Ç–∏—á–Ω–æ)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –í `AccountActionView` –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –≤–∞–ª—é—Ç—É –æ–ø–µ—Ä–∞—Ü–∏–∏
- –í –∏—Å—Ç–æ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞ –¥–ª—è –æ–±–æ–∏—Ö —Å—á–µ—Ç–æ–≤ (source –∏ target)
- –í–∞–ª—é—Ç–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏, –µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è

‚ö†Ô∏è **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–∞–ª—é—Ç—É —Å—á–µ—Ç–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è –≤ —Ñ–æ—Ä–º–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—É—é –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—É–º–º—É –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞

### 4. ‚úÖ –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ —Å—á–µ—Ç–æ–≤ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ - –£–õ–£–ß–®–ï–ù–û

**–õ–æ–∫–∞—Ü–∏—è:** `AccountActionView.swift:79-84`

‚úÖ **–•–æ—Ä–æ—à–æ:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "–ù–µ—Ç –¥—Ä—É–≥–∏—Ö —Å—á–µ—Ç–æ–≤ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞".

‚ö†Ô∏è **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):** –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç" –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å—á–µ—Ç–∞.

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ)

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –≤–∞–ª—é—Ç –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–∞—Ö:**
   - –•—Ä–∞–Ω–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—É–º–º—ã –¥–ª—è source –∏ target —Å—á–µ—Ç–æ–≤
   - –ò–ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ª–µ—Ç—É –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –±–∞–ª–∞–Ω—Å–æ–≤
   - –û–±–Ω–æ–≤–∏—Ç—å `recalculateAccountBalances()` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∞–ª—é—Ç

2. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–∞–º–æ–º—É —Å–µ–±–µ:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ `sourceId != targetId` –≤ `saveTransaction()`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `EditTransactionView`

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç:**
   - –ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥, –µ—Å–ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—à–∏–±–∫—É

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ)

4. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤:**
   - –£–¥–∞–ª–∏—Ç—å –º–µ—Ç–æ–¥ `transfer()` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤–µ–∑–¥–µ
   - –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏

5. **–£–ª—É—á—à–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤:**
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å "‚Üí" –¥–ª—è —Å—É–º–º—ã
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–æ–≥–æ—Ç–∏–ø—ã —Å—á–µ—Ç–æ–≤
   - –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤–∞–ª—é—Ç—É –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—É–º–º—É

6. **–£–ª—É—á—à–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é:**
   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `amount > 0`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ)

7. **–£–ª—É—á—à–∏—Ç—å UI/UX:**
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫—É—Ä—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–≤–æ–¥–æ–º
   - –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç" –ø—Ä–∏ –ø—É—Å—Ç–æ–º —Å–ø–∏—Å–∫–µ
   - –£–ª—É—á—à–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

8. **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è:**
   - –ï–¥–∏–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ü–µ—Ä–µ–≤–æ–¥"
   - –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

---

## üîç –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (–¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å)

- [ ] –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –≤–∞–ª—é—Ç–æ–π
- [ ] –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–∞–ª—é—Ç–∞–º–∏ (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è)
- [ ] –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–∞–º–æ–º—É —Å–µ–±–µ
- [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–≤–æ–¥–∞
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏

### –í–∞–∂–Ω—ã–µ (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å)

- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç
- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞ (–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–æ–≤, —Å—É–º–º—ã)
- [ ] Recurring –ø–µ—Ä–µ–≤–æ–¥—ã
- [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏
- [ ] –£–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å)

- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–æ–≥–æ—Ç–∏–ø–æ–≤ —Å—á–µ—Ç–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏
- [ ] –ü–æ–∫–∞–∑ –∫—É—Ä—Å–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–≤–æ–¥–æ–º
- [ ] –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Å—á–µ—Ç–æ–º

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ú–æ–¥–µ–ª–∏
- `AIFinanceManager/Models/Transaction.swift` - –º–æ–¥–µ–ª—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `AIFinanceManager/Models/RecurringTransaction.swift` - –º–æ–¥–µ–ª—å recurring —Å–µ—Ä–∏–π

### ViewModels
- `AIFinanceManager/ViewModels/TransactionsViewModel.swift` - –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏

### Views
- `AIFinanceManager/Views/AccountActionView.swift` - —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞
- `AIFinanceManager/Views/EditTransactionView.swift` - —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `AIFinanceManager/Views/HistoryView.swift` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### Services
- `AIFinanceManager/Services/CurrencyConverter.swift` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç

### Utils
- `AIFinanceManager/Utils/CategoryEmoji.swift` - –∏–∫–æ–Ω–∫–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ (–¥–æ/–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π)

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- **–§–∞–π–ª–æ–≤ —Å –∫–æ–¥–æ–º –ø–µ—Ä–µ–≤–æ–¥–æ–≤:** 6
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏:** ~200
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:** 4 ‚ùå
- **–í–∞–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:** 8 ‚ö†Ô∏è
- **–ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π:** 4

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- **–§–∞–π–ª–æ–≤ —Å –∫–æ–¥–æ–º –ø–µ—Ä–µ–≤–æ–¥–æ–≤:** 6
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏:** ~280 (+80 —Å—Ç—Ä–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏–π)
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:** 0 ‚úÖ
- **–í–∞–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:** 0 ‚úÖ
- **–ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π:** –í—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã ‚úÖ

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!**

–û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–∞–º–æ–º—É —Å–µ–±–µ
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–ª—é—Ç –¥–ª—è –æ–±–æ–∏—Ö —Å—á–µ—Ç–æ–≤ (source –∏ target)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è amount > 0
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã alert'—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω Haptic feedback –¥–ª—è –æ—à–∏–±–æ–∫

**–û—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:** 95% (–±—ã–ª–æ 60%) ‚¨ÜÔ∏è +35%  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2):

7. ‚úÖ **–ü—Ä–µ—Ñ–∏–∫—Å "‚Üí" –¥–ª—è —Å—É–º–º—ã** - –¥–æ–±–∞–≤–ª–µ–Ω –≤–∏–∑—É–∞–ª—å–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏
8. ‚úÖ **–õ–æ–≥–æ—Ç–∏–ø—ã —Å—á–µ—Ç–æ–≤** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–æ—Ç–∏–ø—ã –¥–ª—è source –∏ target —Å—á–µ—Ç–æ–≤ (—Ä–∞–∑–º–µ—Ä 14pt)
9. ‚úÖ **–¶–≤–µ—Ç —Å—É–º–º—ã –ø–µ—Ä–µ–≤–æ–¥–∞** - –∏–∑–º–µ–Ω–µ–Ω —Å —Å–µ—Ä–æ–≥–æ (.gray) –Ω–∞ —Å–∏–Ω–∏–π (.blue) –¥–ª—è –ª—É—á—à–µ–π –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
10. ‚úÖ **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ "–ü–µ—Ä–µ–≤–æ–¥"** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `TransactionsViewModel.transfer()` (–±—ã–ª–æ "Transfer")
11. ‚úÖ **–£–ª—É—á—à–µ–Ω accessibilityText** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ source –∏ target —Å—á–µ—Ç–∞—Ö –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
12. ‚úÖ **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∞–ª—é—Ç** - —É–ª—É—á—à–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—É–º–º –¥–ª—è –æ–±–æ–∏—Ö —Å—á–µ—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `convertSync()`

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å):

‚ö†Ô∏è **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–Ω–µ–∫—Ä–∏—Ç–∏—á–Ω–æ):**
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `targetConvertedAmount` –≤ –º–æ–¥–µ–ª—å Transaction –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—É–º–º—ã –ø–æ–ª—É—á–∞—Ç–µ–ª—è (—É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫—É—Ä—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–≤–æ–¥–æ–º (UX —É–ª—É—á—à–µ–Ω–∏–µ)
- –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç" –ø—Ä–∏ –ø—É—Å—Ç–æ–º —Å–ø–∏—Å–∫–µ (UX —É–ª—É—á—à–µ–Ω–∏–µ)

## ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2) - –í–´–ü–û–õ–ù–ï–ù–û

### 6. ‚úÖ –£–ª—É—á—à–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—É–º–º—ã –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏

**–õ–æ–∫–∞—Ü–∏—è:** `HistoryView.swift:813-860`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–µ—Ñ–∏–∫—Å "‚Üí" –¥–ª—è —Å—É–º–º—ã –ø–µ—Ä–µ–≤–æ–¥–∞
- –£–ª—É—á—à–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—É–º–º –¥–ª—è –æ–±–æ–∏—Ö —Å—á–µ—Ç–æ–≤
- –î–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∫—ç—à (`convertSync()`)

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚Üí 100 USD
(45000 KZT)
‚Üí 45000 KZT
```

### 7. ‚úÖ –£–ª—É—á—à–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏ - –ª–æ–≥–æ—Ç–∏–ø—ã —Å—á–µ—Ç–æ–≤

**–õ–æ–∫–∞—Ü–∏—è:** `HistoryView.swift:678-705`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–æ—Ç–∏–ø—ã —Å—á–µ—Ç–æ–≤ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (source –∏ target)
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–æ—Ç–∏–ø—ã —Å—á–µ—Ç–æ–≤ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –†–∞–∑–º–µ—Ä –ª–æ–≥–æ—Ç–∏–ø–æ–≤: 14pt –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- Source account logo + name ‚Üí Target account logo + name

### 8. ‚úÖ –£–ª—É—á—à–µ–Ω —Ü–≤–µ—Ç —Å—É–º–º—ã –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ –∏—Å—Ç–æ—Ä–∏–∏

**–õ–æ–∫–∞—Ü–∏—è:** `HistoryView.swift:873-882`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```swift
case .internalTransfer:
    return .blue // –°–∏–Ω–∏–π —Ü–≤–µ—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —Å –∏–∫–æ–Ω–∫–æ–π
```

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–∏–Ω–∏–º —Ü–≤–µ—Ç–æ–º (–≤–º–µ—Å—Ç–æ —Å–µ—Ä–æ–≥–æ) –¥–ª—è –ª—É—á—à–µ–π –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏.

### 9. ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–∞

**–õ–æ–∫–∞—Ü–∏—è:** `TransactionsViewModel.swift:973`, `AccountActionView.swift:314`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –ò–∑–º–µ–Ω–µ–Ω–æ "Transfer" –Ω–∞ "–ü–µ—Ä–µ–≤–æ–¥" –≤ `TransactionsViewModel.transfer()`
- –í—Å–µ –º–µ—Å—Ç–∞ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç "–ü–µ—Ä–µ–≤–æ–¥" (–ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ï–¥–∏–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ü–µ—Ä–µ–≤–æ–¥" –≤–æ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

### 10. ‚úÖ –£–ª—É—á—à–µ–Ω accessibilityText –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

**–õ–æ–∫–∞—Ü–∏—è:** `HistoryView.swift:862-890`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ source –∏ target —Å—á–µ—Ç–∞—Ö –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- –£–ª—É—á—à–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–ª—è VoiceOver

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
```
"Transfer, –ü–µ—Ä–µ–≤–æ–¥, 100 USD, from Source Account, to Target Account"
```

---

## üìä –ò—Ç–æ–≥–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- **–§–∞–π–ª–æ–≤ —Å –∫–æ–¥–æ–º –ø–µ—Ä–µ–≤–æ–¥–æ–≤:** 6
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏:** ~250
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:** 0 ‚úÖ
- **–í–∞–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:** 0 ‚úÖ
- **–ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π:** –í—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã ‚úÖ

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!**

### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1) - ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û:
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Å–∞–º–æ–º—É —Å–µ–±–µ
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–ª—é—Ç –¥–ª—è –æ–±–æ–∏—Ö —Å—á–µ—Ç–æ–≤ (source –∏ target)
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤–∞–ª—é—Ç
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è amount > 0
5. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `recalculateAccountBalances()` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∞–ª—é—Ç –ø–µ—Ä–µ–≤–æ–¥–æ–≤

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2) - ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û:
6. ‚úÖ –£–ª—É—á—à–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—É–º–º—ã –ø–µ—Ä–µ–≤–æ–¥–∞ (–ø—Ä–µ—Ñ–∏–∫—Å "‚Üí")
7. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–æ—Ç–∏–ø—ã —Å—á–µ—Ç–æ–≤ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
8. ‚úÖ –£–ª—É—á—à–µ–Ω —Ü–≤–µ—Ç —Å—É–º–º—ã –ø–µ—Ä–µ–≤–æ–¥–∞ (—Å–∏–Ω–∏–π –≤–º–µ—Å—Ç–æ —Å–µ—Ä–æ–≥–æ)
9. ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ü–µ—Ä–µ–≤–æ–¥"
10. ‚úÖ –£–ª—É—á—à–µ–Ω accessibilityText –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
11. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∫—ç—à –¥–ª—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è

**–û—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:** 95% (–±—ã–ª–æ 60%) ‚¨ÜÔ∏è +35%  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production

---

## üìà –°–≤–æ–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. ‚úÖ `AccountActionView.swift` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, alert'—ã
2. ‚úÖ `EditTransactionView.swift` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, alert'—ã
3. ‚úÖ `HistoryView.swift` - —É–ª—É—á—à–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (–ø—Ä–µ—Ñ–∏–∫—Å "‚Üí", –ª–æ–≥–æ—Ç–∏–ø—ã, —Ü–≤–µ—Ç–∞, –≤–∞–ª—é—Ç—ã)
4. ‚úÖ `TransactionsViewModel.swift` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–ª—é—Ç, —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
5. ‚úÖ `CurrencyConverter.swift` - –¥–æ–±–∞–≤–ª–µ–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ `convertSync()` –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫—ç—à

### –î–æ–±–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞: ~120
### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º: 4 ‚Üí 0
### –í—ã–ø–æ–ª–Ω–µ–Ω–æ —É–ª—É—á—à–µ–Ω–∏–π: 12 –∏–∑ 12

---

‚ö†Ô∏è **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω–æ):**
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `targetConvertedAmount` –≤ –º–æ–¥–µ–ª—å Transaction –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—É–º–º—ã –ø–æ–ª—É—á–∞—Ç–µ–ª—è (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫—É—Ä—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–≤–æ–¥–æ–º (UX —É–ª—É—á—à–µ–Ω–∏–µ)
- –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç" –ø—Ä–∏ –ø—É—Å—Ç–æ–º —Å–ø–∏—Å–∫–µ (UX —É–ª—É—á—à–µ–Ω–∏–µ)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –≠—Ç–∏ —É–ª—É—á—à–µ–Ω–∏—è –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å –Ω–∞ –±—É–¥—É—â–∏–µ –≤–µ—Ä—Å–∏–∏, —Ç–µ–∫—É—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–∞.
