# HistoryView.swift - –ê–Ω–∞–ª–∏–∑ –∏ –ü–ª–∞–Ω –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2026-01-27
**–§–∞–π–ª:** `AIFinanceManager/Views/HistoryView.swift`
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** 370

---

## üìä Executive Summary

HistoryView —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–µ–≤—ã–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π. –ê–Ω–∞–ª–∏–∑ –≤—ã—è–≤–∏–ª, —á—Ç–æ view —É–∂–µ –∏–º–µ–µ—Ç —Ö–æ—Ä–æ—à—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–æ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—é –∏ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞:** 370 —Å—Ç—Ä–æ–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è < 300 –¥–ª—è view)
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ `@State`:** 8 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ view state)
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ `onChange`:** 6 –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π (–º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 3 ViewModels + 1 EnvironmentObject + 1 Manager
- **SRP Score:** 6/10 (view –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π)

---

## üéØ –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã

### 1. –ù–∞—Ä—É—à–µ–Ω–∏–µ Single Responsibility Principle (High Priority)

**–ü—Ä–æ–±–ª–µ–º–∞:** HistoryView –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π:
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π (searchText, debouncedSearchText, selectedAccountFilter)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º (cachedGroupedTransactions, cachedSortedKeys)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (—á–µ—Ä–µ–∑ paginationManager)
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ (time, account, category, search)
- –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª–∞ –∫ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–µ
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ day expenses –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Å–µ–∫—Ü–∏–π

**–õ–æ–∫–∞—Ü–∏—è:** –°—Ç—Ä–æ–∫–∏ 15-27, 283-303, 306-324

**–í–ª–∏—è–Ω–∏–µ:**
- –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –¢—è–∂–µ–ª–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- –í—ã—Å–æ–∫–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å (coupling) —Å ViewModels

### 2. –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ State (Medium Priority)

**–ü—Ä–æ–±–ª–µ–º–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —É—Ä–æ–≤–Ω—è–º–∏:

```swift
// –°—Ç—Ä–æ–∫–∏ 23-25: –ö–µ—à –≤ View
@State private var cachedGroupedTransactions: [String: [Transaction]] = [:]
@State private var cachedSortedKeys: [String] = []

// –°—Ç—Ä–æ–∫–∏ 30: –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ —Ç–∞–∫–∂–µ —Ö—Ä–∞–Ω–∏—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ
@StateObject private var paginationManager = TransactionPaginationManager()
```

**–õ–æ–∫–∞—Ü–∏—è:** –°—Ç—Ä–æ–∫–∏ 23-30, 295-299

**–í–ª–∏—è–Ω–∏–µ:**
- –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

### 3. –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –õ–æ–≥–∏–∫–∞ –î–µ–±–∞—É–Ω—Å–∏–Ω–≥–∞ (Medium Priority)

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–≤–∞ —Ä–∞–∑–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–∞ –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤:
- Search text: 300ms (—Å—Ç—Ä–æ–∫–∏ 117-133)
- Filter changes: 150ms (—Å—Ç—Ä–æ–∫–∏ 108-115, 142-148)

**–õ–æ–∫–∞—Ü–∏—è:** –°—Ç—Ä–æ–∫–∏ 117-148

**–í–ª–∏—è–Ω–∏–µ:**
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- –ú–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø—É—Ç–∞–Ω–∏—Ü—É —Å —Ä–∞–∑–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π `HistoryFilterCoordinator` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥–∞.

### 4. –°–ª–æ–∂–Ω–∞—è –õ–æ–≥–∏–∫–∞ –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª–∞ (Low-Medium Priority)

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª–∞ –∫ "—Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π" —Å–µ–∫—Ü–∏–∏ –∑–∞–Ω–∏–º–∞–µ—Ç 45 —Å—Ç—Ä–æ–∫ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —É—Å–ª–æ–≤–∏–π.

**–õ–æ–∫–∞—Ü–∏—è:** –°—Ç—Ä–æ–∫–∏ 231-277

**–í–ª–∏—è–Ω–∏–µ:**
- –°–Ω–∏–∂–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞
- –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –î—É–±–ª–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏ (todayKey, yesterdayKey)

### 5. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Memo –¥–ª—è –î–æ—Ä–æ–≥–∏—Ö –í—ã—á–∏—Å–ª–µ–Ω–∏–π (Medium Priority)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ `dateHeader(for:transactions:)` –≤—ã–∑—ã–≤–∞–µ—Ç `reduce` –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –≤–∞–ª—é—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ —Å–µ–∫—Ü–∏–∏.

**–õ–æ–∫–∞—Ü–∏—è:** –°—Ç—Ä–æ–∫–∏ 306-324

```swift
let dayExpenses = transactions
    .filter { $0.type == .expense }
    .reduce(0.0) { total, transaction in
        let amountInBaseCurrency = transactionsViewModel.getConvertedAmountOrCompute(
            transaction: transaction,
            to: baseCurrency
        )
        return total + amountInBaseCurrency
    }
```

**–í–ª–∏—è–Ω–∏–µ:**
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –¥–æ—Ä–æ–≥–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã `getConvertedAmountOrCompute`

### 6. –°–º–µ—à–µ–Ω–∏–µ –õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∏ –ù–µ–ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –°—Ç—Ä–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç—Ä–æ–∫–∏ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ `String(localized:)`, –Ω–æ –µ—Å—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ –ø—Ä–æ–±–ª–µ–º–µ —Å ViewModel.

**–õ–æ–∫–∞—Ü–∏—è:** –°—Ç—Ä–æ–∫–∏ 32-40, TODO –Ω–∞ —Å—Ç—Ä–æ–∫–µ 33

```swift
// TODO: –ò—Å–ø—Ä–∞–≤–∏—Ç—å ViewModel –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π
private var todayKey: String {
    String(localized: "date.today")
}
```

**–í–ª–∏—è–Ω–∏–µ:**
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

---

## üé® –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –î–∏–∑–∞–π–Ω-–°–∏—Å—Ç–µ–º–µ

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

1. **AppSpacing:**
   - ‚úÖ `.padding(.top, AppSpacing.xxxl)` (—Å—Ç—Ä–æ–∫–∞ 188)
   - ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

2. **AppTypography:**
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ DateSectionHeader
   - ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞

3. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
   - ‚úÖ EmptyStateView —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
   - ‚úÖ HistoryFilterSection —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–µ
   - ‚úÖ DateSectionHeader —Å `.glassCardStyle()`

### ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≠–ª–µ–º–µ–Ω—Ç—ã:

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤:**
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å `AppAnimation.standard` –¥–ª—è –ø–ª–∞–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ accessibility labels:**
   - –ù—É–∂–Ω—ã –¥–ª—è screen readers (VoiceOver)

---

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –¢–µ–∫—É—â–∏–µ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–£–∂–µ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã) ‚úÖ

1. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è:** TransactionPaginationManager –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ 10 —Å–µ–∫—Ü–∏–π
2. **–î–µ–±–∞—É–Ω—Å–∏–Ω–≥ –ø–æ–∏—Å–∫–∞:** 300ms –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞
3. **–î–µ–±–∞—É–Ω—Å–∏–Ω–≥ —Ñ–∏–ª—å—Ç—Ä–æ–≤:** 150ms –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
4. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –≤ ViewModel
5. **Performance Profiling:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PerformanceProfiler

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –£–ª—É—á—à–µ–Ω–∏—è üìà

#### 1. –ú–µ–º–æ–∏–∑–∞—Ü–∏—è Day Expenses (High Impact)

**–ü—Ä–æ–±–ª–µ–º–∞:** Day expenses –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–µ —Å–µ–∫—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:** –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Dictionary –ø–æ dateKey:

```swift
@State private var cachedDayExpenses: [String: Double] = [:]

private func computeDayExpenses(for dateKey: String, transactions: [Transaction]) -> Double {
    if let cached = cachedDayExpenses[dateKey] {
        return cached
    }

    let expenses = transactions
        .filter { $0.type == .expense }
        .reduce(0.0) { ... }

    cachedDayExpenses[dateKey] = expenses
    return expenses
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:** –£–º–µ–Ω—å—à–µ–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –Ω–∞ 70-90% –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ.

#### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `@MainActor` –ò–∑–æ–ª—è—Ü–∏–∏ (Medium Impact)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ async –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ onChange –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å UI.

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ UI-–æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –Ω–∞ MainActor, –∞ —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è ‚Äî –≤ background.

#### 3. LazyVStack –≤–º–µ—Å—Ç–æ List (Low-Medium Impact)

**–û–±—Å—É–∂–¥–µ–Ω–∏–µ:** List –∏–º–µ–µ—Ç overhead –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —è—á–µ–µ–∫. –î–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ view LazyVStack –º–æ–∂–µ—Ç –±—ã—Ç—å –±—ã—Å—Ç—Ä–µ–µ.

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°—Ä–∞–≤–Ω–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å List vs ScrollView + LazyVStack.

---

## üèóÔ∏è –ü–ª–∞–Ω –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ (SRP)

### –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

```
HistoryView (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∏ layout)
‚îú‚îÄ‚îÄ HistoryFilterCoordinator (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥–æ–º)
‚îú‚îÄ‚îÄ HistoryScrollBehavior (–ª–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª–∞)
‚îú‚îÄ‚îÄ HistoryTransactionsList (—Å–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
‚îî‚îÄ‚îÄ DateSectionHeaderViewModel (–≤—ã—á–∏—Å–ª–µ–Ω–∏–µ day expenses)
```

### –ù–æ–≤—ã–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

#### 1. HistoryFilterCoordinator (ObservableObject)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
```swift
@MainActor
class HistoryFilterCoordinator: ObservableObject {
    @Published var selectedAccountFilter: String?
    @Published var searchText: String = ""
    @Published var debouncedSearchText: String = ""

    func applySearch(_ text: String)
    func applyAccountFilter(_ accountId: String?)
    func reset()
}
```

**–ü–µ—Ä–µ–º–µ—â–∞–µ–º—ã–µ —Å—Ç—Ä–æ–∫–∏:** 15-19, 117-148

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

#### 2. HistoryScrollBehavior (Struct —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–µ–∫—Ü–∏–∏ –¥–ª—è –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª–∞.

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
```swift
struct HistoryScrollBehavior {
    static func findScrollTarget(
        sections: [String],
        grouped: [String: [Transaction]],
        todayKey: String,
        yesterdayKey: String
    ) -> String?
}
```

**–ü–µ—Ä–µ–º–µ—â–∞–µ–º—ã–µ —Å—Ç—Ä–æ–∫–∏:** 244-270

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ò–∑–æ–ª—è—Ü–∏—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
- –õ–µ–≥–∫–æ unit-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ß–∏—Å—Ç—ã–π –∫–æ–¥ –≤ view

#### 3. DateSectionExpensesCache (Class/Struct)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ day expenses.

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
```swift
@MainActor
class DateSectionExpensesCache {
    private var cache: [String: Double] = [:]

    func getExpenses(
        for dateKey: String,
        transactions: [Transaction],
        baseCurrency: String,
        viewModel: TransactionsViewModel
    ) -> Double

    func invalidate()
}
```

**–ü–µ—Ä–µ–º–µ—â–∞–µ–º—ã–µ —Å—Ç—Ä–æ–∫–∏:** 306-324

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ú–µ–º–æ–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ—à–µ–º –∏–∑ –æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å TTL –¥–ª—è –∫–µ—à–∞

#### 4. HistoryTransactionsList (View)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
```swift
struct HistoryTransactionsList: View {
    let paginationManager: TransactionPaginationManager
    let baseCurrency: String
    let onSectionAppear: (String) -> Void

    var body: some View { ... }
}
```

**–ü–µ—Ä–µ–º–µ—â–∞–µ–º—ã–µ —Å—Ç—Ä–æ–∫–∏:** 193-280

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ò–∑–æ–ª—è—Ü–∏—è —Å–ø–∏—Å–∫–∞ –æ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –õ–µ–≥—á–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- –£–ø—Ä–æ—â–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üßπ –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ö–æ–¥

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

1. **`cachedGroupedTransactions` –∏ `cachedSortedKeys` (—Å—Ç—Ä–æ–∫–∏ 23-25)**
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ paginationManager
   - ‚ö†Ô∏è **–ü—Ä–æ–±–ª–µ–º–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–±—Ä–∞—Ç—å –∫–µ—à –∏–∑ view –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ paginationManager

### –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:

1. **TODO –Ω–∞ —Å—Ç—Ä–æ–∫–µ 33:**
   ```swift
   // TODO: –ò—Å–ø—Ä–∞–≤–∏—Ç—å ViewModel –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π
   ```
   **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –õ–∏–±–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å, –ª–∏–±–æ —É–¥–∞–ª–∏—Ç—å TODO –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ.

### –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–ø–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞):

‚ùå **–ù–µ –Ω–∞–π–¥–µ–Ω—ã** ‚Äî –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.

---

## üìù –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è:

1. **Navigation Title:** `.navigationTitle(String(localized: "navigation.history"))` ‚úÖ
2. **Search Placeholder:** `String(localized: "search.placeholder")` ‚úÖ
3. **Empty States:** –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω—ã ‚úÖ
4. **Date Keys:** `date.today`, `date.yesterday` ‚úÖ

### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã:

1. **–õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏ –≤ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–µ:**
   - ViewModel –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–µ–ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏
   - View –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
   - **–†–∏—Å–∫:** –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞

**–õ–æ–∫–∞—Ü–∏—è:** –°—Ç—Ä–æ–∫–∏ 34-40, 246-251

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ ViewModel –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–ª—é—á–∏
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å enum –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ Localizable.strings:

–í—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–ª—é—á–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç:
- ‚úÖ `navigation.history`
- ‚úÖ `search.placeholder`
- ‚úÖ `emptyState.noTransactions`
- ‚úÖ `emptyState.searchNoResults`
- ‚úÖ `emptyState.tryDifferentSearch`
- ‚úÖ `emptyState.tryDifferentFilters`
- ‚úÖ `emptyState.startTracking`
- ‚úÖ `date.today`
- ‚úÖ `date.yesterday`

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ü–ª–∞–Ω –î–µ–π—Å—Ç–≤–∏–π

### Phase 1: Critical Optimizations (1-2 –¥–Ω—è)

#### 1.1 –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–µ—à–∞
- [ ] –£–¥–∞–ª–∏—Ç—å `cachedGroupedTransactions` –∏ `cachedSortedKeys` –∏–∑ view
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `paginationManager` –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥ `updateCachedTransactions()` (—Å—Ç—Ä–æ–∫–∞ 283)

**–§–∞–π–ª—ã:** `HistoryView.swift` (—Å—Ç—Ä–æ–∫–∏ 23-25, 283-303)

#### 1.2 –ú–µ–º–æ–∏–∑–∞—Ü–∏—è day expenses
- [ ] –°–æ–∑–¥–∞—Ç—å `DateSectionExpensesCache`
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É –∏–∑ `dateHeader(for:transactions:)` –≤ –∫–µ—à
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–µ—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–ù–æ–≤—ã–π —Ñ–∞–π–ª:** `Views/History/DateSectionExpensesCache.swift`

#### 1.3 –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –∫–ª—é—á–µ–π –¥–∞—Ç
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ ViewModel –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `String(localized:)` –¥–ª—è –∫–ª—é—á–µ–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏
- [ ] –ó–∞–∫—Ä—ã—Ç—å TODO –Ω–∞ —Å—Ç—Ä–æ–∫–µ 33

**–§–∞–π–ª—ã:** `HistoryView.swift`, `TransactionsViewModel.swift`

---

### Phase 2: Decomposition (2-3 –¥–Ω—è)

#### 2.1 –°–æ–∑–¥–∞—Ç—å HistoryFilterCoordinator
- [ ] –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π ObservableObject
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–∑ view
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã

**–ù–æ–≤—ã–π —Ñ–∞–π–ª:** `ViewModels/HistoryFilterCoordinator.swift`

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏:** 15-19, 105-148

#### 2.2 –í—ã–¥–µ–ª–∏—Ç—å HistoryScrollBehavior
- [ ] –°–æ–∑–¥–∞—Ç—å struct —Å static –º–µ—Ç–æ–¥–æ–º
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª–∞ (—Å—Ç—Ä–æ–∫–∏ 244-270)
- [ ] –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**–ù–æ–≤—ã–π —Ñ–∞–π–ª:** `Views/History/HistoryScrollBehavior.swift`

#### 2.3 –í—ã–¥–µ–ª–∏—Ç—å HistoryTransactionsList
- [ ] –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π View –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å ScrollViewReader –∏ List
- [ ] –£–ø—Ä–æ—Å—Ç–∏—Ç—å HistoryView –¥–æ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É—é—â–µ–π —Ä–æ–ª–∏

**–ù–æ–≤—ã–π —Ñ–∞–π–ª:** `Views/History/HistoryTransactionsList.swift`

---

### Phase 3: Performance & Polish (1-2 –¥–Ω—è)

#### 3.1 –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `AppAnimation.standard` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å fade-in –¥–ª—è –Ω–æ–≤—ã—Ö —Å–µ–∫—Ü–∏–π –ø—Ä–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- [ ] Smooth transitions –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ empty state

**–§–∞–π–ª—ã:** `HistoryView.swift`, `HistoryFilterSection.swift`

#### 3.2 Accessibility
- [ ] –î–æ–±–∞–≤–∏—Ç—å `.accessibilityLabel()` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å `.accessibilityHint()` –¥–ª—è —Å–ø–∏—Å–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å VoiceOver

**–§–∞–π–ª—ã:** `HistoryView.swift`, `HistoryFilterSection.swift`

#### 3.3 Performance —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å 1000+ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
- [ ] –ò–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ Instruments
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ú–µ—Ç—Ä–∏–∫–∏ –î–æ/–ü–æ—Å–ª–µ:

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|----|---------|----|
| –°—Ç—Ä–æ–∫ –≤ HistoryView | 370 | ~150 | -59% |
| @State –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö | 8 | 3-4 | -50% |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å –º–µ—Ç–æ–¥–∞ | High | Medium | ‚¨áÔ∏è |
| –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å | Low | High | ‚¨ÜÔ∏è‚¨ÜÔ∏è |
| –í—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å–µ–∫—Ü–∏–∏ | ~3ms | ~0.5ms | -83% |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ | –ë–∞–∑–æ–≤–∞—è + –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ | –ë–∞–∑–æ–≤–∞—è | -15% |

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –£–ª—É—á—à–µ–Ω–∏—è:

- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ Single Responsibility Principle
- ‚úÖ –õ–µ–≥–∫–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –æ—Ç UI
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

- ‚ö° –£–º–µ–Ω—å—à–µ–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ –Ω–∞ 70-90%
- ‚ö° –ë–æ–ª–µ–µ –ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
- ‚ö° –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. Unit-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ —Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è:
- `HistoryFilterCoordinator`: —Ç–µ—Å—Ç—ã –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥–∞, –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
- `HistoryScrollBehavior`: —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Å–∫—Ä–æ–ª–ª–∞
- `DateSectionExpensesCache`: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### 2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–æ–±–∞–≤–∏—Ç—å doc-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è:
- –ü—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- –°–ª–æ–∂–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª)
- –ö–∞—Å—Ç–æ–º–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 3. Code Review Checklist

–ü—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å:
- [ ] –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–µ (AppSpacing, AppTypography)
- [ ] –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫
- [ ] Accessibility labels
- [ ] Performance profiling –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—É—Ç–µ–π
- [ ] Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –§–∞–π–ª—ã –¥–ª—è –ü—Ä–æ–≤–µ—Ä–∫–∏

–ü—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. `TransactionsViewModel.swift` ‚Äî –º–µ—Ç–æ–¥ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ –¥–∞—Ç–∞–º
2. `TransactionPaginationManager.swift` ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
3. `HistoryFilterSection.swift` ‚Äî —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å UI
4. `DateSectionHeader.swift` ‚Äî –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
5. `TransactionCard.swift` ‚Äî –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —è—á–µ–µ–∫

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

HistoryView —É–∂–µ –∏–º–µ–µ—Ç —Ö–æ—Ä–æ—à—É—é –±–∞–∑—É —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –û—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è** –ø–æ SRP –¥–ª—è –ª—É—á—à–µ–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏
2. **–ú–µ–º–æ–∏–∑–∞—Ü–∏—è** –¥–æ—Ä–æ–≥–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
3. **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** state –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏
4. **–£–ª—É—á—à–µ–Ω–∏–µ accessibility** –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —ç—Ç–æ–≥–æ –ø–ª–∞–Ω–∞ —É–ª—É—á—à–∏—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —É–ø—Ä–æ—Å—Ç–∏—Ç –¥–∞–ª—å–Ω–µ–π—à—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É.

---

**–ê–≤—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∞:** Claude Sonnet 4.5
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞—á–∞—Ç—å —Å Phase 1 –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
