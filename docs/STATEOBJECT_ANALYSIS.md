# –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è @StateObject vs @ObservedObject

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **ContentView** - —Å–æ–∑–¥–∞–µ—Ç `TransactionsViewModel` –∫–∞–∫ `@StateObject`
   ```swift
   @StateObject private var viewModel = TransactionsViewModel()
   ```
   ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ**: ContentView –≤–ª–∞–¥–µ–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º ViewModel

2. **AIFinanceManagerApp** - —Å–æ–∑–¥–∞–µ—Ç `TimeFilterManager` –∫–∞–∫ `@StateObject`
   ```swift
   @StateObject private var timeFilterManager = TimeFilterManager()
   ```
   ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ**: App-level —Å–æ—Å—Ç–æ—è–Ω–∏–µ

3. **–í—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ views** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç `@ObservedObject`
   - HistoryView, AccountActionView, DepositDetailView, –∏ —Ç.–¥.
   ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ**: –ü–æ–ª—É—á–∞—é—Ç ViewModel –∏–∑–≤–Ω–µ, –Ω–µ –≤–ª–∞–¥–µ—é—Ç –∏–º

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö

```
AIFinanceManagerApp
  ‚îî‚îÄ @StateObject timeFilterManager (EnvironmentObject)
  
ContentView
  ‚îú‚îÄ @StateObject viewModel (TransactionsViewModel) ‚Üê –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è
  ‚îî‚îÄ –ü–µ—Ä–µ–¥–∞—á–∞ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
      ‚îú‚îÄ HistoryView(viewModel: viewModel)
      ‚îú‚îÄ SubscriptionsListView(viewModel: viewModel)
      ‚îú‚îÄ QuickAddTransactionView(viewModel: viewModel)
      ‚îú‚îÄ AccountActionView(viewModel: viewModel, account: account)
      ‚îú‚îÄ DepositDetailView(viewModel: viewModel, accountId: account.id)
      ‚îî‚îÄ ... (–º–Ω–æ–≥–æ –¥—Ä—É–≥–∏—Ö views)
```

## –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π:
- **@StateObject**: 3 –º–µ—Å—Ç–∞
  - `ContentView.viewModel` (TransactionsViewModel) ‚úÖ
  - `ContentView.voiceService` (VoiceInputService) ‚úÖ
  - `AIFinanceManagerApp.timeFilterManager` (TimeFilterManager) ‚úÖ

- **@ObservedObject**: 31+ –º–µ—Å—Ç
  - –í—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ views, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∞—é—Ç ViewModel —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚úÖ

## –û—Ü–µ–Ω–∫–∞ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü**: –¢–æ–ª—å–∫–æ `ContentView` —Å–æ–∑–¥–∞–µ—Ç `TransactionsViewModel`
2. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ @ObservedObject**: –í—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ views –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `@ObservedObject`
3. **EnvironmentObject –¥–ª—è TimeFilterManager**: –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
4. **–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: ViewModel –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö

### ü§î –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

#### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ @EnvironmentObject –¥–ª—è TransactionsViewModel
**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥**: ViewModel –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```swift
HistoryView(viewModel: viewModel)
AccountActionView(viewModel: viewModel, account: account)
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å @EnvironmentObject
```swift
// –í ContentView
.environmentObject(viewModel)

// –í –¥–æ—á–µ—Ä–Ω–∏—Ö views
@EnvironmentObject var viewModel: TransactionsViewModel
```

**–ü–ª—é—Å—ã EnvironmentObject**:
- –ú–µ–Ω—å—à–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ init
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —á–µ—Ä–µ–∑ –∏–µ—Ä–∞—Ä—Ö–∏—é
- –ú–µ–Ω—å—à–µ boilerplate –∫–æ–¥–∞

**–ú–∏–Ω—É—Å—ã EnvironmentObject**:
- –ú–µ–Ω–µ–µ —è–≤–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (—Å–ª–æ–∂–Ω–µ–µ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç ViewModel)
- –°–ª–æ–∂–Ω–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (–Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å environment)
- –ú–æ–∂–µ—Ç —Å–∫—Ä—ã–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: **–û—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥** (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
- –ë–æ–ª–µ–µ —è–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –õ—É—á—à–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞

#### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ª–∏—à–Ω–∏–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã

–í—Å–µ views –∏—Å–ø–æ–ª—å–∑—É—é—Ç `@ObservedObject` –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ —Å—Ç–æ–∏—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ:
- ViewModel –Ω–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ ViewModel –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç –ª–∏—à–Ω–∏–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ã

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: ‚úÖ ViewModel —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –≤ ContentView, –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ views –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç–æ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä

#### 3. VoiceInputService

**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥**:
```swift
@StateObject private var voiceService = VoiceInputService()
```

‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ**: VoiceInputService - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –æ—Å–Ω–æ–≤–Ω—ã–º ViewModel

## –ú–µ—Ç—Ä–∏–∫–∏

- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ @StateObject**: 3 (–≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ)
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ @ObservedObject**: 31+ (–≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ)
- **–ú–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è TransactionsViewModel**: 1 (ContentView) ‚úÖ
- **–ú–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è TimeFilterManager**: 1 (App) ‚úÖ

## –í—ã–≤–æ–¥—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞

1. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ @StateObject**: –¢–æ–ª—å–∫–æ —Ç–∞–º, –≥–¥–µ View –≤–ª–∞–¥–µ–µ—Ç –æ–±—ä–µ–∫—Ç–æ–º
2. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ @ObservedObject**: –í–µ–∑–¥–µ, –≥–¥–µ View –ø–æ–ª—É—á–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∏–∑–≤–Ω–µ
3. **–ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º**: ViewModel —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ

### üéØ –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç @StateObject vs @ObservedObject
- ‚úÖ –ò–∑–±–µ–≥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
- ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ –Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –∑–∞—Ö–æ—á–µ—Ç—Å—è —É–ø—Ä–æ—Å—Ç–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É ViewModel:
1. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å @EnvironmentObject, –Ω–æ —ç—Ç–æ —É—Ö—É–¥—à–∏—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å
2. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Coordinator pattern, –Ω–æ —ç—Ç–æ —É—Å–ª–æ–∂–Ω–∏—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
3. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å - —Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ —è–≤–ª—è–µ—Ç—Å—è best practice

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

### –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã):
```swift
// –ü–ª—é—Å—ã:
+ –Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
+ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
+ –ü–æ–Ω—è—Ç–Ω–æ, –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç ViewModel
+ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Ä–∞–∑–Ω—ã–µ ViewModels –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

// –ú–∏–Ω—É—Å—ã:
- –ë–æ–ª—å—à–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ init
- –ù—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ –∏–µ—Ä–∞—Ä—Ö–∏—é
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (EnvironmentObject):
```swift
// –ü–ª—é—Å—ã:
+ –ú–µ–Ω—å—à–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
+ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞
+ –ú–µ–Ω—å—à–µ boilerplate

// –ú–∏–Ω—É—Å—ã:
- –ú–µ–Ω–µ–µ —è–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –°–ª–æ–∂–Ω–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ú–æ–∂–µ—Ç —Å–∫—Ä—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
```

## –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞: ‚úÖ –û–¢–õ–ò–ß–ù–û

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç best practices SwiftUI:**
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ @StateObject
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ @ObservedObject
- ‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: **–ù–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ** - —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞.
