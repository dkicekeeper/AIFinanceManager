//
//  VoiceInputConstants.swift
//  AIFinanceManager
//
//  Created on 2026-01-18
//

import Foundation
import AVFAudio

/// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
enum VoiceInputConstants {
    // MARK: - –ó–∞–¥–µ—Ä–∂–∫–∏ –∏ —Ç–∞–π–º–∞—É—Ç—ã

    /// –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏–µ–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)
    /// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏
    static let finalizationDelayMs: UInt64 = 350

    /// –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∞—É–¥–∏–æ-–¥–≤–∏–∂–∫–∞ (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)
    /// –î–∞—ë—Ç –≤—Ä–µ–º—è –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏
    static let audioEngineStopDelayMs: UInt64 = 300

    /// –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –∞–≤—Ç–æ—Å—Ç–∞—Ä—Ç–æ–º –∑–∞–ø–∏—Å–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ view (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)
    static let autoStartDelayMs: UInt64 = 100

    /// –ó–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è debounce –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)
    static let validationDebounceMs: UInt64 = 300

    // MARK: - –ü–∞—Ä—Å–∏–Ω–≥ —á–∏—Å–µ–ª

    /// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Å–ª–æ–≤–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–¥–µ–≤—è—Ç—å —Ç—ã—Å—è—á –¥–µ–≤—è—Ç—å—Å–æ—Ç –¥–µ–≤—è–Ω–æ—Å—Ç–æ –¥–µ–≤—è—Ç—å")
    static let maxWordNumberValue = 9999

    /// –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—É–º–º—ã
    static let minAmountValue: Decimal = 0.01

    /// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—É–º–º—ã
    static let maxAmountValue: Decimal = 999_999_999

    // MARK: - –°–∫–æ—Ä–∏–Ω–≥ —Å—á–µ—Ç–æ–≤

    /// –ü–æ—Ä–æ–≥ —Ä–∞–∑–Ω–∏—Ü—ã –≤ —Å–∫–æ—Ä–µ –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Å—á–µ—Ç–∞
    /// –ï—Å–ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ª—É—á—à–∏–º –∏ –≤—Ç–æ—Ä—ã–º –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º –º–µ–Ω—å—à–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è,
    /// —Å—á–µ—Ç –Ω–µ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    static let accountScoreAmbiguityThreshold = 5

    /// –í–µ—Å —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∏–º–µ–Ω–∏ —Å—á–µ—Ç–∞
    static let accountExactMatchScore = 20

    /// –í–µ—Å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É ("—Å–æ —Å—á–µ—Ç–∞ [name]")
    static let accountPatternMatchScore = 30

    /// –í–µ—Å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∞–ª–∏–∞—Å–∞
    static let accountAliasMatchScore = 10

    /// –í–µ—Å –∑–∞ –∫–∞–∂–¥—ã–π —Å–æ–≤–ø–∞–≤—à–∏–π —Ç–æ–∫–µ–Ω
    static let accountTokenMatchScore = 5

    // MARK: - UI –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

    /// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –¥–ª—è –ø–æ–ª—è –æ–ø–∏—Å–∞–Ω–∏—è
    static let descriptionMaxLines = 6

    /// –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –¥–ª—è –ø–æ–ª—è –æ–ø–∏—Å–∞–Ω–∏—è
    static let descriptionMinLines = 3

    /// –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ —Å–∫—Ä–æ–ª–ª–∞ –¥–ª—è live-—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
    static let transcriptionMaxHeight: CGFloat = 200

    // MARK: - –ê—É–¥–∏–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

    /// –†–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –¥–ª—è –∞—É–¥–∏–æ (—Å–µ–º–ø–ª—ã)
    static let audioBufferSize: AVAudioFrameCount = 1024

    // MARK: - Voice Activity Detection (VAD)

    /// –ü–æ—Ä–æ–≥ —Ç–∏—à–∏–Ω—ã –≤ –¥–µ—Ü–∏–±–µ–ª–∞—Ö (dB)
    /// –ó–Ω–∞—á–µ–Ω–∏—è –Ω–∏–∂–µ —ç—Ç–æ–≥–æ –ø–æ—Ä–æ–≥–∞ —Å—á–∏—Ç–∞—é—Ç—Å—è —Ç–∏—à–∏–Ω–æ–π
    /// –¢–∏–ø–∏—á–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω: –æ—Ç -50 (–æ—á–µ–Ω—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π) –¥–æ -30 (–º–µ–Ω–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π)
    static let vadSilenceThresholdDb: Float = -40.0

    /// –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–∏—à–∏–Ω—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (—Å–µ–∫—É–Ω–¥—ã)
    /// –ó–∞–ø–∏—Å—å –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ —ç—Ç–æ–π –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π —Ç–∏—à–∏–Ω—ã
    static let vadSilenceDuration: TimeInterval = 2.5

    /// –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ—á–∏ –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º VAD (—Å–µ–∫—É–Ω–¥—ã)
    /// –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –≤ –Ω–∞—á–∞–ª–µ –∑–∞–ø–∏—Å–∏
    static let vadMinimumSpeechDuration: TimeInterval = 1.0

    /// –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å Voice Activity Detection
    /// –ï—Å–ª–∏ true, –∑–∞–ø–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ —Ç–∏—à–∏–Ω—ã
    /// –ï—Å–ª–∏ false, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤—Ä—É—á–Ω—É—é –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
    static let vadEnabled: Bool = true

    // MARK: - Debug

    /// –§–ª–∞–≥ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞
    static let enableParsingDebugLogs = true

    /// –ü—Ä–µ—Ñ–∏–∫—Å –¥–ª—è debug-–ª–æ–≥–æ–≤
    static let debugLogPrefix = "üîç [VoiceInput]"
}
