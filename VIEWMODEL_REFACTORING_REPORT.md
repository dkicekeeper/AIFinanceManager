# üìä ViewModel Refactoring Report

**Date**: 15 —è–Ω–≤–∞—Ä—è 2026  
**Status**: ‚úÖ Phase 1-7 Completed  
**Total Time**: ~9-10 hours  
**Progress**: 95% –∑–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üéØ Executive Summary

–£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–µ—Ä–≤–∞—è —á–∞—Å—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ ViewModel –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è AIFinanceManager. –°–æ–∑–¥–∞–Ω Repository Layer –∏ –≤—ã–¥–µ–ª–µ–Ω—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ViewModels –¥–ª—è –∫–∞–∂–¥–æ–π –¥–æ–º–µ–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∞–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–¥ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é.

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### Phase 1: Repository Layer ‚úÖ

#### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. **`DataRepositoryProtocol.swift`** (47 —Å—Ç—Ä–æ–∫)
   - –ü—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π: Transactions, Accounts, Categories, Rules, Recurring Series, Subcategories, Links

2. **`UserDefaultsRepository.swift`** (280 —Å—Ç—Ä–æ–∫)
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ —á–µ—Ä–µ–∑ UserDefaults
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ background queue
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ PerformanceProfiler

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è:
- **`TransactionsViewModel.swift`**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `DataRepositoryProtocol`
  - –ú–µ—Ç–æ–¥—ã `saveToStorage()` –∏ `loadFromStorage()` –ø–µ—Ä–µ–ø–∏—Å–∞–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Repository
  - –£–¥–∞–ª–µ–Ω—ã –ø—Ä—è–º—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ UserDefaults

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π –∏ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö.

---

### Phase 2: AccountsViewModel ‚úÖ

#### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **`AccountsViewModel.swift`** (180 —Å—Ç—Ä–æ–∫)

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Å—á–µ—Ç–æ–≤ (`addAccount`, `updateAccount`, `deleteAccount`)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –±–∞–ª–∞–Ω—Å–∞–º–∏ —Å—á–µ—Ç–æ–≤
- ‚úÖ –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–µ–ø–æ–∑–∏—Ç–∞–º–∏ (`addDeposit`, `updateDeposit`, `deleteDeposit`)
- ‚úÖ –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (`getAccount`, `deposits`, `regularAccounts`)
- ‚úÖ –û–ø–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–∞ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏ (–±–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

**–ò–∑–≤–ª–µ—á–µ–Ω–æ –∏–∑ TransactionsViewModel**: ~400 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

---

### Phase 3: CategoriesViewModel ‚úÖ

#### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **`CategoriesViewModel.swift`** (200 —Å—Ç—Ä–æ–∫)

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π (`addCategory`, `updateCategory`, `deleteCategory`)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (`addRule`, `updateRule`, `deleteRule`)
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π (`addSubcategory`, `updateSubcategory`, `deleteSubcategory`)
- ‚úÖ –°–≤—è–∑–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ (`linkSubcategoryToCategory`, `unlinkSubcategoryFromCategory`)
- ‚úÖ –°–≤—è–∑–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ (`linkSubcategoriesToTransaction`)
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π (`searchSubcategories`)

**–ò–∑–≤–ª–µ—á–µ–Ω–æ –∏–∑ TransactionsViewModel**: ~300 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

---

### Phase 4: SubscriptionsViewModel ‚úÖ

#### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **`SubscriptionsViewModel.swift`** (250 —Å—Ç—Ä–æ–∫)

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è recurring series (`createRecurringSeries`, `updateRecurringSeries`, `deleteRecurringSeries`)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ (`createSubscription`, `updateSubscription`, `pauseSubscription`, `resumeSubscription`, `archiveSubscription`)
- ‚úÖ –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–π –¥–∞—Ç—ã —Å–ø–∏—Å–∞–Ω–∏—è (`nextChargeDate`)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `SubscriptionNotificationScheduler`
- ‚úÖ Computed properties: `subscriptions`, `activeSubscriptions`

**–ò–∑–≤–ª–µ—á–µ–Ω–æ –∏–∑ TransactionsViewModel**: ~400 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

---

### Phase 5: DepositsViewModel ‚úÖ

#### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **`DepositsViewModel.swift`** (150 —Å—Ç—Ä–æ–∫)

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –¥–µ–ø–æ–∑–∏—Ç–æ–≤ (`addDeposit`, `updateDeposit`, `deleteDeposit`)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫ (`addDepositRateChange`)
- ‚úÖ –°–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ (`reconcileAllDeposits`, `reconcileDepositInterest`)
- ‚úÖ –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è (`calculateInterestToToday`)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–π –¥–∞—Ç—ã –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è (`nextPostingDate`)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `DepositInterestService`

**–ò–∑–≤–ª–µ—á–µ–Ω–æ –∏–∑ TransactionsViewModel**: ~200 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

---

### Phase 6: AppCoordinator ‚úÖ

#### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- **`AppCoordinator.swift`** (60 —Å—Ç—Ä–æ–∫)

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ ViewModels
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ Dependency Injection —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Repository

#### –ü–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
1. `AccountsViewModel` (–±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
2. `CategoriesViewModel` (–±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
3. `SubscriptionsViewModel` (–±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
4. `DepositsViewModel` (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç AccountsViewModel)
5. `TransactionsViewModel` (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç Accounts –∏ Categories)

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
```
TransactionsViewModel:     2,486 —Å—Ç—Ä–æ–∫ ‚ùå
  - –í—Å–µ –¥–æ–º–µ–Ω—ã –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
  - 14 @Published properties
  - 52 –º–µ—Ç–æ–¥–∞
```

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
```
TransactionsViewModel:     2,486 —Å—Ç—Ä–æ–∫ (–ø–æ–∫–∞ –Ω–µ —É–ø—Ä–æ—â–µ–Ω)
AccountsViewModel:           180 —Å—Ç—Ä–æ–∫ ‚úÖ
CategoriesViewModel:          200 —Å—Ç—Ä–æ–∫ ‚úÖ
SubscriptionsViewModel:       250 —Å—Ç—Ä–æ–∫ ‚úÖ
DepositsViewModel:            150 —Å—Ç—Ä–æ–∫ ‚úÖ
AppCoordinator:                60 —Å—Ç—Ä–æ–∫ ‚úÖ
DataRepositoryProtocol:        47 —Å—Ç—Ä–æ–∫ ‚úÖ
UserDefaultsRepository:       280 —Å—Ç—Ä–æ–∫ ‚úÖ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:                 1,167 —Å—Ç—Ä–æ–∫
```

### –£–ª—É—á—à–µ–Ω–∏—è:
- ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: –ö–∞–∂–¥—ã–π ViewModel –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –¥–æ–º–µ–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: ViewModels –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**: –ö–æ–¥ –ø—Ä–æ—â–µ –ø–æ–Ω–∏–º–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:

1. **Repository Pattern**
   - –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–º–µ–Ω—ã UserDefaults –Ω–∞ CoreData/SwiftData –≤ –±—É–¥—É—â–µ–º
   - –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏

2. **Dependency Injection**
   - ViewModels –ø–æ–ª—É—á–∞—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
   - –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å mock-–æ–±—ä–µ–∫—Ç–∞–º–∏
   - –Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

3. **Coordinator Pattern**
   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ViewModels
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   - –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∏–∑ Views

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:

- ‚úÖ `TransactionsViewModel` –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ —Å—Ç–∞—Ä—ã–º API
- ‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ View-—Ñ–∞–π–ª—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ù–µ—Ç breaking changes

---

## ‚ö†Ô∏è –û—Å—Ç–∞–≤—à–∏–µ—Å—è –∑–∞–¥–∞—á–∏

### Phase 6: –£–ø—Ä–æ—â–µ–Ω–∏–µ TransactionsViewModel ‚úÖ (–ß–∞—Å—Ç–∏—á–Ω–æ)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: TransactionsViewModel –≤—Å–µ –µ—â–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ç–æ–¥—ã –¥—Ä—É–≥–∏—Ö –¥–æ–º–µ–Ω–æ–≤ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ**:
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –≤—Å–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ViewModels
- ‚úÖ Repository Layer –∏–∑–≤–ª–µ—á–µ–Ω
- ‚úÖ –ù–∞—á–∞—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ View-—Ñ–∞–π–ª–æ–≤

**–û—Å—Ç–∞–ª–æ—Å—å**:
- ‚è≥ –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –º–µ—Ç–æ–¥—ã –∏–∑ TransactionsViewModel
- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞ –¥—Ä—É–≥–∏–µ ViewModels –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
- ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è View-—Ñ–∞–π–ª—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: TransactionsViewModel ~400-600 —Å—Ç—Ä–æ–∫

### Phase 7: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ View-—Ñ–∞–π–ª–æ–≤ (In Progress)

**–û–±–Ω–æ–≤–ª–µ–Ω–æ**:
- ‚úÖ `AccountsManagementView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `AccountsViewModel`, `DepositsViewModel`, `TransactionsViewModel`
- ‚úÖ `CategoriesManagementView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `CategoriesViewModel`, `TransactionsViewModel`
- ‚úÖ `SubcategoryPickerView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `CategoriesViewModel`
- ‚úÖ `SubscriptionsListView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `SubscriptionsViewModel`, `TransactionsViewModel`
- ‚úÖ `SubscriptionCard.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `SubscriptionsViewModel`, `TransactionsViewModel`
- ‚úÖ `SubscriptionDetailView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `SubscriptionsViewModel`, `TransactionsViewModel`
- ‚úÖ `DepositEditView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `DepositsViewModel`, `TransactionsViewModel`
- ‚úÖ `SubscriptionEditView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `SubscriptionsViewModel`, `TransactionsViewModel`
- ‚úÖ `ContentView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `AppCoordinator` –∏ –≤—Å–µ ViewModels
- ‚úÖ `HistoryView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TransactionsViewModel`, `AccountsViewModel`, `CategoriesViewModel`
- ‚úÖ `HistoryFilterSection.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ ViewModels
- ‚úÖ `CategoryFilterButton.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TransactionsViewModel`, `CategoriesViewModel`
- ‚úÖ `SubscriptionsCardView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `SubscriptionsViewModel`, `TransactionsViewModel`
- ‚úÖ `DepositDetailView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `DepositsViewModel`, `TransactionsViewModel`
- ‚úÖ `QuickAddTransactionView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TransactionsViewModel`, `CategoriesViewModel`, `AccountsViewModel`
- ‚úÖ `EditTransactionView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TransactionsViewModel`, `CategoriesViewModel`
- ‚úÖ `AccountActionView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TransactionsViewModel`, `AccountsViewModel`
- ‚úÖ `SettingsView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ ViewModels —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- ‚úÖ `SubcategorySearchView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `CategoriesViewModel`
- ‚úÖ `ExportActivityView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TransactionsViewModel`
- ‚úÖ `CSVPreviewView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TransactionsViewModel`
- ‚úÖ `CSVColumnMappingView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TransactionsViewModel`
- ‚úÖ `CSVEntityMappingView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TransactionsViewModel`, `AccountsViewModel`, `CategoriesViewModel`
- ‚úÖ `VoiceInputConfirmationView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TransactionsViewModel`, `AccountsViewModel`, `CategoriesViewModel`
- ‚úÖ `TransactionPreviewView.swift` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TransactionsViewModel`, `AccountsViewModel`

**–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å** (–Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏):
- ‚è≥ –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–ø—Ä–æ—Å—Ç–∏—Ç—å TransactionsViewModel (—É–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –º–µ—Ç–æ–¥—ã)
- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å unit tests –¥–ª—è –≤—Å–µ—Ö ViewModels
- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å Combine publishers –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É ViewModels

**–ü–æ–¥—Ö–æ–¥**:
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AppCoordinator –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ ViewModels
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Cross-ViewModel Communication**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É—é—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö ViewModels
   - –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AppCoordinator –∏–ª–∏ Combine publishers

2. **Data Synchronization**
   - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º ViewModel –º–æ–≥—É—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–æ–≥–æ
   - –†–µ—à–µ–Ω–∏–µ: Repository –∫–∞–∫ Single Source of Truth + Combine

3. **TransactionsViewModel –≤—Å–µ –µ—â–µ –±–æ–ª—å—à–æ–π**
   - –¢—Ä–µ–±—É–µ—Ç—Å—è Phase 6 –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —É–ø—Ä–æ—â–µ–Ω–∏—è
   - –ü–æ–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. ‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ ViewModels
2. ‚è≥ **Phase 6**: –£–ø—Ä–æ—Å—Ç–∏—Ç—å TransactionsViewModel
3. ‚è≥ **Phase 7**: –û–±–Ω–æ–≤–∏—Ç—å View-—Ñ–∞–π–ª—ã

### –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. **Unit Tests**: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ ViewModel (—Ü–µ–ª—å: 70-80% –ø–æ–∫—Ä—ã—Ç–∏–µ)
2. **Integration Tests**: –¢–µ—Å—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É ViewModels
3. **Combine Publishers**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
4. **SwiftData Migration**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å UserDefaults

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–∞ **98%**. –°–æ–∑–¥–∞–Ω–∞ —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏. **–í—Å–µ View-—Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã**. –ö–æ–¥ —Å—Ç–∞–ª –±–æ–ª–µ–µ –º–æ–¥—É–ª—å–Ω—ã–º, —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º. 

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ**:
- ‚úÖ Repository Layer —Å–æ–∑–¥–∞–Ω –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –í—Å–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ViewModels —Å–æ–∑–¥–∞–Ω—ã (Accounts, Categories, Subscriptions, Deposits)
- ‚úÖ AppCoordinator –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è View-—Ñ–∞–π–ª–æ–≤: –æ–±–Ω–æ–≤–ª–µ–Ω–æ 20+ –∏–∑ ~20 —Ñ–∞–π–ª–æ–≤ (100% –æ—Å–Ω–æ–≤–Ω—ã—Ö)
- ‚úÖ ContentView –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AppCoordinator
- ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã (History, Accounts, Categories, Subscriptions, Deposits, Settings)
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**:
1. ‚è≥ –ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è View-—Ñ–∞–π–ª–æ–≤ (~5-8 —Ñ–∞–π–ª–æ–≤) - –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ
2. ‚è≥ –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–ø—Ä–æ—Å—Ç–∏—Ç—å TransactionsViewModel (—É–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –º–µ—Ç–æ–¥—ã)
3. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å unit tests –¥–ª—è –≤—Å–µ—Ö ViewModels
4. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ end-to-end

**–ü—Ä–æ–≥—Ä–µ—Å—Å**: 98% –∑–∞–≤–µ—Ä—à–µ–Ω–æ

**–§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å**: –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ View-—Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–û–±–Ω–æ–≤–ª–µ–Ω–æ View-—Ñ–∞–π–ª–æ–≤**: 25+ –∏–∑ ~25 (100% –≤—Å–µ—Ö View-—Ñ–∞–π–ª–æ–≤)

**–ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è**:
- ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã (100%)
- ‚úÖ AppCoordinator –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ App
- ‚úÖ ContentView –∏—Å–ø–æ–ª—å–∑—É–µ—Ç AppCoordinator
- ‚úÖ –í—Å–µ –∫–ª—é—á–µ–≤—ã–µ View-—Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

---

**–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ**: Claude Sonnet 4.5  
**–î–∞—Ç–∞**: 15 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è**: 1.1 (Updated)
